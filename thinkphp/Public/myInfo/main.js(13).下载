define("koubei/main",["require","jquery","common/js/Remoter","etpl","./koubei.tpl"],function(require){function e(e){h.compile(p),c(e).html(h.render("koubei-title")),t()}function t(){c(".ibx-koubei-mine").click(function(){s(c(this)),o(),n(),g.remote(_)}),c(".ibx-koubei-turth").click(function(){s(c(this)),o(),r(),m.remote()}),c(".ibx-koubei-hot").click(function(){s(c(this)),a()}),i(),c(".ibx-koubei-turth").trigger("click")}function i(){g.on("success",function(e){if(w=e,c(".ibx-koubei-mine").hasClass("current"))if(!w.messageList.length)c("#ibx-koubei").html(h.render("koubei-empty"));else c("#ibx-koubei").html(h.render("koubei-mine")),l(w.messageList.length),u(0)}).on("fail",function(){c("#ibx-koubei").html(h.render("loading-error"))}),m.on("success",function(e){if(T=e,c(".ibx-koubei-turth").hasClass("current"))c("#ibx-koubei").html(h.render("koubei-turth")),v=0,f(),c(".koubei-turth-refresh").click(function(){v++,f()})}).on("fail",function(){c("#ibx-koubei").html(h.render("loading-error"))})}function n(){c(".koubei-title-link-container .enter-koubei-link").hide().filter(".koubei-home-link").show()}function r(e){c(".koubei-title-link-container .enter-koubei-link").hide().filter(".koubei-wall-link").show()}function a(){function e(){var e=c(".koubei-hot-item").width();c(".koubei-hot-list").animate({left:-(x*e)+"px"},1e3)}if(o(),c(".koubei-title-link-container .enter-koubei-link").hide(),c(".ibx-koubei-hot").hasClass("current"))c("#ibx-koubei").html(h.render("koubei-hot")),c(".koubei-hot-list-prev").click(function(){if(x--,x>=0)e();else x=0}),c(".koubei-hot-list-next").click(function(){if(x++,x<=c(".koubei-hot-item").length-1)e();else x=c(".koubei-hot-item").length-1})}function o(){c("#ibx-koubei").html(h.render("koubei-loading"))}function s(e){c("#ibx-mod-koubei .ibx-inner-title-tabitem").removeClass("current"),e.addClass("current")}function l(e){var t=Math.ceil(e/y);if(e)c("#ibx-koubei .ibx-card-pager").html(h.render("koubei-pager",{length:new Array(t)}));c("#ibx-koubei .ibx-card-pager").on("click",".ibx-card-pager-item",function(){var e=c(this).closest(".ibx-card-pager"),t=+c(this).attr("data-page");if(!c(this).hasClass("current"))e.find(".ibx-card-pager-item").removeClass("current"),c(this).addClass("current"),u(t)}),c("#ibx-koubei .ibx-card-pager").on("click",".ibx-card-pager-prev",function(){var e=c(this).closest(".ibx-card-pager"),t=+e.find(".ibx-card-pager-item.current").attr("data-page")-1;t>-1&&e.find(".ibx-card-pager-item:eq("+t+")").trigger("click")}),c("#ibx-mod-koubei").on("click",".ibx-card-pager-next",function(){var e=c(this).closest(".ibx-card-pager"),t=+e.find(".ibx-card-pager-item.current").attr("data-page")+1;t!==e.find(".ibx-card-pager-item").length&&e.find(".ibx-card-pager-item:eq("+t+")").trigger("click")})}function u(e){var t={};t.messageList=[];for(var i=e*y,n=i;i+y>n&&w.messageList[n];n++)t.messageList.push(w.messageList[n]);c("#koubei-mine-list").html(h.render("koubei-mine-list",t))}function f(){var e=Math.ceil(T.data.length/b)-1;v=v>e?0:v;var t={};t.data=[];for(var i=v*b,n=i;i+b>n&&T.data[n];n++)t.data.push(T.data[n]);c("#koubei-turth-list").html(h.render("koubei-turth-list",t))}var c=require("jquery"),d=require("common/js/Remoter"),h=require("etpl"),p=require("./koubei.tpl"),g=new d("HOME_KOUBEI_MY"),m=new d("HOME_KOUBEI_TURTH"),y=4,v=0,b=4,x=0,_={intPage:0,appid:6,status:1,srcid:1,cuttitle:30},w=[],T=[];return{render:e}}),define("koubei",["koubei/main"],function(e){return e});