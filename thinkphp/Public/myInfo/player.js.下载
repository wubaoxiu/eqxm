!function(e,t){if("undefined"==typeof e._mu)e._mu={};if("object"==typeof exports)return module.exports=t();else if("function"==typeof define&&define.amd)return define("muplayer/core/cfg",["jquery"],t);else return e._mu.cfg=t()}(this,function(e){var t;return t=this,e.extend({namespace:t._mu,debug:!1,version:"0.9.1",timerResolution:25,engine:{TYPES:{FLASH_MP3:"FlashMP3Core",FLASH_MP4:"FlashMP4Core",AUDIO:"AudioCore"},EVENTS:{STATECHANGE:"engine:statechange",POSITIONCHANGE:"engine:postionchange",PROGRESS:"engine:progress",ERROR:"engine:error",INIT:"engine:init",INIT_FAIL:"engine:init_fail"},STATES:{NOT_INIT:"not_init",PREBUFFER:"prebuffer",BUFFERING:"buffering",PLAYING:"playing",PAUSE:"pause",STOP:"stop",END:"ended"},ERRCODE:{MEDIA_ERR_ABORTED:"1",MEDIA_ERR_NETWORK:"2",MEDIA_ERR_DECODE:"3",MEDIA_ERR_SRC_NOT_SUPPORTED:"4"}}},"undefined"==typeof t._mu?{}:t._mu.cfg)}),function(e,t){if("object"==typeof exports)return module.exports=t();else if("function"==typeof define&&define.amd)return define("muplayer/core/utils",["jquery","muplayer/core/cfg"],t);else return e._mu.utils=t(e._mu.cfg)}(this,function(e,t){var n,i,r,a,o,s,l,u,d,f,h,c;for(d={},a=String.prototype,i=Number.prototype,r=Object.prototype,n=Array.prototype,l=n.push,o=r.hasOwnProperty,u=r.toString,c=["Arguments","Function","String","Number","Date","RegExp"],f=0,h=c.length;h>f;f++)s=c[f],d["is"+s]=function(e){return function(t){return u.call(t)==="[object "+e+"]"}}(s);if(!e.isFunction(a.startsWith))a.startsWith=function(e){return this.slice(0,e.length)===e};if(!e.isFunction(a.endsWith))a.endsWith=function(e){return this.slice(-e.length)===e};return i.toFixed=function(e){var t,n,i;if(i=Math.pow(10,e),t=(Math.round(this*i)/i).toString(),0===e)return t;if(t.indexOf(".")<0)t+=".";for(n=e+1-(t.length-t.indexOf("."));n--;)t+="0";return t},e.extend(d,{isEmpty:function(t){var n,i,r;if(null==t)return!0;if(e.isArray(t)||this.isString(t))return 0===t.length;for(i=0,r=t.length;r>i;i++)if(n=t[i],this.has(t,n))return!1;return!0},isBoolean:function(e){return e===!0||e===!1||"[object Boolean]"===u.call(e)},has:function(e,t){return o.call(e,t)},random:function(e,t){if(!t)t=e,e=0;return e+Math.floor(Math.random()*(t-e+1))},shuffle:function(e){var t,n,i,r,a,o;for(t=0,r=[],a=0,o=e.length;o>a;a++)n=e[a],i=this.random(t++),r[t-1]=r[i],r[i]=n;return r},clone:function(t){if(!e.isPlainObject(t));if(e.isArray(t))return t.slice();else return e.extend({},t)},time2str:function(e){var t,n,i,r,a,o;if(a=[],t=Math.floor,e=Math.round(e),n=t(e/3600),i=t((e-3600*n)/60),o=e%60,r=function(e){return function(e,t){var n,i,r;if(i="",n="",0>e)n="-";if(r=String(Math.abs(e)),r.length<t)i=new Array(t-r.length+1).join("0");return n+i+r}}(this),n)a.push(n);return a.push(r(i,2)),a.push(r(o,2)),a.join(":")},namespace:function(){var e,n,i,r,a,o,s,l,u,d;for(e=arguments,s=".",l=0,u=e.length;u>l;l++)if(n=e[l],o=t.namespace,n.indexOf(s)>-1)for(i=n.split(s),d=[0,i.length],r=d[0],a=d[1];a>r;)o[i[r]]=o[i[r]]||{},o=o[i[r]],r++;else o[n]=o[n]||{},o=o[n];return o},wrap:function(e,t){return function(){var n;return n=[e],l.apply(n,arguments),t.apply(this,n)}},toAbsoluteUrl:function(e){var t;return t=document.createElement("div"),t.innerHTML="<a></a>",t.firstChild.href=e,t.innerHTML=t.innerHTML,t.firstChild.href}}),d}),function(e,t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define("muplayer/lib/events",["jquery"],t);else e._mu.Events=t()}(this,function(e){function t(){}function n(e,t,n){if(e){var i=0,r=e.length,a=t[0],o=t[1],s=t[2],l=!0;switch(t.length){case 0:for(;r>i;i+=2)l=e[i].call(e[i+1]||n)!==!1&&l;break;case 1:for(;r>i;i+=2)l=e[i].call(e[i+1]||n,a)!==!1&&l;break;case 2:for(;r>i;i+=2)l=e[i].call(e[i+1]||n,a,o)!==!1&&l;break;case 3:for(;r>i;i+=2)l=e[i].call(e[i+1]||n,a,o,s)!==!1&&l;break;default:for(;r>i;i+=2)l=e[i].apply(e[i+1]||n,t)!==!1&&l}}return l}function i(e){return"[object Function]"===Object.prototype.toString.call(e)}var r=/\s+/;t.prototype.on=function(e,t,n){var i,a,o;if(!t)return this;for(i=this.__events||(this.__events={}),e=e.split(r);a=e.shift();)o=i[a]||(i[a]=[]),o.push(t,n);return this},t.prototype.once=function(e,t,n){var i=this,r=function(){i.off(e,r),t.apply(this,arguments)};this.on(e,r,n)},t.prototype.off=function(e,t,n){var i,o,s,l;if(!(i=this.__events))return this;if(!(e||t||n))return delete this.__events,this;for(e=e?e.split(r):a(i);o=e.shift();)if(s=i[o])if(t||n){for(l=s.length-2;l>=0;l-=2)if(!(t&&s[l]!==t||n&&s[l+1]!==n))s.splice(l,2)}else delete i[o];else;return this},t.prototype.trigger=function(e){var t,i,a,o,s,l,u=[],d=!0;if(!(t=this.__events))return this;for(e=e.split(r),s=1,l=arguments.length;l>s;s++)u[s-1]=arguments[s];for(;i=e.shift();){if(a=t.all)a=a.slice();if(o=t[i])o=o.slice();d=n(o,u,this)&&d,d=n(a,[i].concat(u),this)&&d}return d},t.prototype.emit=t.prototype.trigger,t.mixTo=function(e){e=i(e)?e.prototype:e;var n=t.prototype;for(var r in n)if(n.hasOwnProperty(r))e[r]=n[r]};var a=Object.keys;if(!a)a=function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n))t.push(n);return t};return t});var __indexOf=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};!function(e,t){if("object"==typeof exports)return module.exports=t();else if("function"==typeof define&&define.amd)return define("muplayer/core/playlist",["jquery","muplayer/core/utils","muplayer/lib/events"],t);else return e._mu.Playlist=t(_mu.utils,_mu.Events)}(this,function(e,t,n){var i;return i=function(){function n(t){this.opts=e.extend({},this.defaults,t),this.reset()}return n.prototype.reset=function(){if(this.cur="",e.isArray(this.list))return this.list.length=0;else return this.list=[]},n.prototype._resetListRandom=function(e){var n;if("list-random"===this.mode)return e=e||0,this._listRandomIndex=e,this._listRandom=t.shuffle(function(){n=[];for(var e=0,t=this.list.length;t>=0?t>e:e>t;t>=0?e++:e--)n.push(e);return n}.apply(this)),this.cur=this.list[this._listRandom[e]];else return void 0},n.prototype._formatSid=function(n){var i,r,a;return i=this.opts.absoluteUrl,r=function(e){return i&&t.toAbsoluteUrl(e)||""+e},e.isArray(n)&&function(){var e,t,i;for(i=[],e=0,t=n.length;t>e;e++)if(a=n[e])i.push(r(a));return i}()||r(n)},n.prototype.setMode=function(e){if("single"===e||"random"===e||"list-random"===e||"list"===e||"loop"===e)this.mode=e;return this._resetListRandom()},n.prototype.add=function(t){if(t=this._formatSid(t),this.remove(t),e.isArray(t)&&t.length)this.list=t.concat(this.list);else if(t)this.list.unshift(t);return this.trigger("playlist:add",t),this._resetListRandom()},n.prototype.remove=function(t){var n,i,r,a;if(i=function(t){return function(n){var i;if(i=e.inArray(n,t.list),-1!==i)return t.list.splice(i,1);else return void 0}}(this),t=this._formatSid(t),e.isArray(t))for(r=0,a=t.length;a>r;r++)n=t[r],i(n);else i(t);return this.trigger("playlist:remove",t),this._resetListRandom()},n.prototype.prev=function(){var n,i,r,a;switch(r=this.list,n=e.inArray(this.cur,r),i=r.length,a=n-1,this.mode){case"single":a=n;break;case"random":a=t.random(0,i-1);break;case"list":if(n=0)return this.cur=r[0],!1;break;case"list-random":if(n=this._listRandomIndex--,a=n-1,0===n)a=i-1,this._resetListRandom(a);return this.cur=r[this._listRandom[a]];case"loop":if(0===n)a=i-1}return this.cur=r[a]},n.prototype.next=function(){var n,i,r,a;switch(r=this.list,n=e.inArray(this.cur,r),i=r.length,a=n+1,this.mode){case"single":a=n;break;case"random":a=t.random(0,i-1);break;case"list":if(n===i-1)return this.cur=r[0],!1;break;case"list-random":if(n=this._listRandomIndex++,a=n+1,n===i-1)a=0,this._resetListRandom(a);return this.cur=r[this._listRandom[a]];case"loop":if(n===i-1)a=0}return this.cur=r[a]},n.prototype.setCur=function(e){if(e+="",__indexOf.call(this.list,e)<0)this.add(e);return this.cur=""+e},n}(),n.mixTo(i),i});var __indexOf=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};!function(e,t){if("object"==typeof exports)return module.exports=t();else if("function"==typeof define&&define.amd)return define("muplayer/core/engines/engineCore",["jquery","muplayer/core/cfg","muplayer/core/utils","muplayer/lib/events"],t);else return e._mu.EngineCore=t(_mu.cfg,_mu.utils,_mu.Events)}(this,function(e,t,n,i){var r,a,o,s,l,u,d;return d=t.engine,r=d.EVENTS,o=d.STATES,s=function(){var e;e=[];for(l in o)u=o[l],e.push(u);return e}(),a=function(){function t(){}return t.prototype._supportedTypes=[],t.prototype.getSupportedTypes=function(){return this._supportedTypes},t.prototype.canPlayType=function(t){return-1!==e.inArray(t,this.getSupportedTypes())},t.prototype.reset=function(){return this.stop(),this.setUrl(),this.setState(o.NOT_INIT)},t.prototype.play=function(){return this},t.prototype.pause=function(){return this},t.prototype.stop=function(){return this},t.prototype.setUrl=function(e){if(null==e)e="";return this._url=e,this},t.prototype.getUrl=function(){return this._url},t.prototype.setState=function(e){var t;if(__indexOf.call(s,e)>=0&&e!==this._state)return t=this._state,this._state=e,this.trigger(r.STATECHANGE,{oldState:t,newState:e});else return void 0},t.prototype.getState=function(){return this._state},t.prototype.setVolume=function(e){return this._volume=e,this},t.prototype.getVolume=function(){return this._volume},t.prototype.setMute=function(e){return this._mute=e,this},t.prototype.getMute=function(){return this._mute},t.prototype.setCurrentPosition=function(e){return this},t.prototype.getCurrentPosition=function(){return 0},t.prototype.getLoadedPercent=function(){return 0},t.prototype.getTotalTime=function(){return 0},t}(),i.mixTo(a),a}),function(e,t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define("muplayer/lib/modernizr.audio",["jquery"],t);else e._mu.Modernizr=t()}(this,function(e){return function(e,t,n){function i(e){c.cssText=e}function r(e,t){return typeof e===t}var a,o,s,l="2.7.1",u={},d=t.documentElement,f="modernizr",h=t.createElement(f),c=h.style,p=({}.toString,{}),y=[],g=y.slice,m={}.hasOwnProperty;if(!r(m,"undefined")&&!r(m.call,"undefined"))s=function(e,t){return m.call(e,t)};else s=function(e,t){return t in e&&r(e.constructor.prototype[t],"undefined")};if(!Function.prototype.bind)Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=g.call(arguments,1),i=function(){if(this instanceof i){var r=function(){};r.prototype=t.prototype;var a=new r,o=t.apply(a,n.concat(g.call(arguments)));if(Object(o)===o)return o;else return a}else return t.apply(e,n.concat(g.call(arguments)))};return i};p.audio=function(){var e=t.createElement("audio"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(i){}return n};for(var v in p)if(s(p,v))o=v.toLowerCase(),u[o]=p[v](),y.push((u[o]?"":"no-")+o);return u.addTest=function(e,t){if("object"==typeof e){for(var i in e)if(s(e,i))u.addTest(i,e[i])}else{if(e=e.toLowerCase(),u[e]!==n)return u;if(t="function"==typeof t?t():t,"undefined"!=typeof enableClasses&&enableClasses)d.className+=" "+(t?"":"no-")+e;u[e]=t}return u},i(""),h=a=null,u._version=l,u}(this,this.document)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function n(){this.constructor=e}for(var i in t)if(__hasProp.call(t,i))e[i]=t[i];return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},__slice=[].slice;!function(e,t){if("object"==typeof exports)return module.exports=t();else if("function"==typeof define&&define.amd)return define("muplayer/core/engines/audioCore",["jquery","muplayer/core/cfg","muplayer/core/utils","muplayer/core/engines/engineCore","muplayer/lib/modernizr.audio"],t);else return e._mu.AudioCore=t(_mu.cfg,_mu.utils,_mu.EngineCore,_mu.Modernizr)}(this,function(e,t,n,i,r){var a,o,s,l,u,d,f;return d=window,f=t.engine,u=f.TYPES,s=f.EVENTS,l=f.STATES,o=f.ERRCODE,a=function(t){function i(t){var n,a,o,s,u,f,h;if(this.opts=e.extend({},i.defaults,t),this.opts.emptyMP3=this.opts.baseDir+this.opts.emptyMP3,u=this.opts,s={"":0,maybe:1,probably:2},o=s[u.confidence],n=r.audio,!n)return this;for(a in n)if(h=n[a],s[h]>=o)this._supportedTypes.push(a);n=new Audio,n.preload=u.preload,n.autoplay=u.autoplay,n.loop=!1,n.on=function(e){return function(e,t){return n.addEventListener(e,t,!1),n}}(this),n.off=function(e){return function(e,t){return n.removeEventListener(e,t,!1),n}}(this),this.audio=n,this._needCanPlay(["play","setCurrentPosition"]),this.setState(l.NOT_INIT),this._initEvents(),f=function(e){return function(){return e.setUrl(u.emptyMP3).play(),d.removeEventListener("touchstart",f,!1)}}(this),d.addEventListener("touchstart",f,!1)}return __extends(i,t),i.defaults={confidence:"maybe",preload:!1,autoplay:!1,emptyMP3:"empty.mp3"},i.prototype._supportedTypes=[],i.prototype.engineType=u.AUDIO,i.prototype._test=function(e){if(!r.audio||!this._supportedTypes.length)return!1;else return e&&this.trigger(s.INIT_FAIL,this.engineType),!0},i.prototype._initEvents=function(){var e,t,n;return n=this.trigger,this.trigger=function(e){return function(t,i){if(e.getUrl()!==e.opts.emptyMP3)return n.call(e,t,i);else return void 0}}(this),e=function(e){return function(t){return e.setState(l.BUFFERING),e.trigger(s.PROGRESS,t||e.getLoadedPercent())}}(this),t=null,this.audio.on("loadstart",function(n){return function(){var i;return i=n.audio,t=setInterval(function(){if(i.readyState>1)return clearInterval(t);else return e()},50),n.setState(l.PREBUFFER)}}(this)).on("playing",function(e){return function(){return e.setState(l.PLAYING)}}(this)).on("pause",function(e){return function(){return e.setState(e.getCurrentPosition()&&l.PAUSE||l.STOP)}}(this)).on("ended",function(e){return function(){return e.setState(l.END)}}(this)).on("error",function(e){return function(){return e.setState(l.END),e.trigger(s.ERROR,o.MEDIA_ERR_NETWORK)}}(this)).on("waiting",function(e){return function(){return e.setState(e.getCurrentPosition()&&l.BUFFERING||l.PREBUFFER)}}(this)).on("timeupdate",function(e){return function(){return e.trigger(s.POSITIONCHANGE,e.getCurrentPosition())}}(this)).on("progress",function(n){var i,r;return clearInterval(t),i=n.loaded||0,r=n.total||1,e(i&&1*(i/r).toFixed(2))})},i.prototype._needCanPlay=function(e){var t,i,r,a,o;for(t=this.audio,o=[],r=0,a=e.length;a>r;r++)i=e[r],o.push(this[i]=n.wrap(this[i],function(e){return function(){var n,i,r;if(i=arguments[0],n=2<=arguments.length?__slice.call(arguments,1):[],t.readyState<3)r=function(){return i.apply(e,n),t.off("canplay",r)},t.on("canplay",r);else i.apply(e,n);return e}}(this)));return o},i.prototype.play=function(){return this.audio.play(),this},i.prototype.pause=function(){return this.audio.pause(),this},i.prototype.stop=function(){try{this.audio.currentTime=0}catch(e){}finally{this.pause()}return this},i.prototype.setUrl=function(e){if(null==e)e="";return this.audio.src=e,this.audio.load(),i.__super__.setUrl.call(this,e)},i.prototype.setVolume=function(e){return this.audio.volume=e/100,i.__super__.setVolume.call(this,e)},i.prototype.setMute=function(e){return this.audio.muted=e,i.__super__.setMute.call(this,e)},i.prototype.setCurrentPosition=function(e){try{this.audio.currentTime=e/1e3}catch(t){}finally{this.play()}return this},i.prototype.getCurrentPosition=function(){return 1e3*this.audio.currentTime},i.prototype.getLoadedPercent=function(){var e,t,n,i,r,a;for(e=this.audio,r=e.duration,i=e.buffered,n=i.length,t=0;n--;)if(i.start(n)<=(a=e.currentTime)&&a<=i.end(n)){t=i.end(n);break}return t=t>r?r:t,r&&1*(t/r).toFixed(2)||0},i.prototype.getTotalTime=function(){var e;return e=this.audio.duration,e&&1e3*e||0},i}(i)}),function(e,t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define("muplayer/lib/Timer",["jquery"],t);else e._mu.Timer=t()}(this,function(e){function t(e){if("string"==typeof e){if(isNaN(parseInt(e,10)))e="1"+e;var t=e.replace(/[^a-z0-9\.]/g,"").match(/(?:(\d+(?:\.\d+)?)(?:days?|d))?(?:(\d+(?:\.\d+)?)(?:hours?|hrs?|h))?(?:(\d+(?:\.\d+)?)(?:minutes?|mins?|m\b))?(?:(\d+(?:\.\d+)?)(?:seconds?|secs?|s))?(?:(\d+(?:\.\d+)?)(?:milliseconds?|ms))?/);if(t[0])return 864e5*parseFloat(t[1]||0)+36e5*parseFloat(t[2]||0)+6e4*parseFloat(t[3]||0)+1e3*parseFloat(t[4]||0)+parseInt(t[5]||0,10);if(!isNaN(parseInt(e,10)))return parseInt(e,10)}if("number"==typeof e)return e;else return 0}function n(e,t){return parseInt(e/t,10)||1}function i(e){if(this instanceof i==!1)return new i(e);else return this._notifications=[],this._resolution=t(e)||1e3,this._running=!1,this._ticks=0,this._timer=null,void(this._drift=0)}return i.prototype={start:function(){var e=this;if(!this._running)this._running=!this._running,setTimeout(function t(){e._ticks++;for(var n=0,i=e._notifications.length;i>n;n++)if(e._notifications[n]&&e._ticks%e._notifications[n].ticks===0)e._notifications[n].callback.call(e._notifications[n],{ticks:e._ticks,resolution:e._resolution});if(e._running)e._timer=setTimeout(t,e._resolution+e._drift),e._drift=0},this._resolution);return this},stop:function(){if(this._running)this._running=!this._running,clearTimeout(this._timer);return this},reset:function(){return this.stop(),this._ticks=0,this},clear:function(){return this.reset(),this._notifications=[],this},ticks:function(){return this._ticks},resolution:function(){return this._resolution},running:function(){return this._running},bind:function(e,i){if(e&&i){var r=n(t(e),this._resolution);this._notifications.push({ticks:r,callback:i})}return this},unbind:function(e){if(!e)this._notifications=[];else for(var t=0,n=this._notifications.length;n>t;t++)if(this._notifications[t]&&this._notifications[t].callback===e)this._notifications.splice(t,1);return this},drift:function(e){return this._drift=e,this}},i.prototype.every=i.prototype.bind,i.prototype.after=function(e,t){var n=this;return i.prototype.bind.call(n,e,function r(){i.prototype.unbind.call(n,r),t.apply(this,arguments)}),this},i}),function(e,t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define("muplayer/lib/jquery.swfobject",["jquery"],t);else t()}(this,function(e){var t=e;!function(e,t,n){function i(e,t){var n=(e[0]||0)-(t[0]||0);return n>0||!n&&e.length>0&&i(e.slice(1),t.slice(1))}function r(e){if(typeof e!=s)return e;var t=[],n="";for(var i in e){if(typeof e[i]==s)n=r(e[i]);else n=[i,l?encodeURI(e[i]):e[i]].join("=");t.push(n)}return t.join("&")}function a(e){var t=[];for(var n in e)if(e[n])t.push([n,'="',e[n],'"'].join(""));return t.join(" ")}function o(e){var t=[];for(var n in e)t.push(['<param name="',n,'" value="',r(e[n]),'" />'].join(""));return t.join("")}var s="object",l=!0;try{var u=n.description||function(){return new n("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}()}catch(d){u="Unavailable"}var f=u.match(/\d+/g)||[0];e[t]={available:f[0]>0,activeX:n&&!n.name,version:{original:u,array:f,string:f.join("."),major:parseInt(f[0],10)||0,minor:parseInt(f[1],10)||0,release:parseInt(f[2],10)||0},hasVersion:function(e){var t=/string|number/.test(typeof e)?e.toString().split("."):/object/.test(typeof e)?[e.major,e.minor]:e||[0,0];return i(f,t)},encodeParams:!0,expressInstall:"expressInstall.swf",expressInstallIsActive:!1,create:function(e){var t=this;if(!e.swf||t.expressInstallIsActive||!t.available&&!e.hasVersionFail)return!1;if(!t.hasVersion(e.hasVersion||1)){if(t.expressInstallIsActive=!0,"function"==typeof e.hasVersionFail)if(!e.hasVersionFail.apply(e))return!1;e={swf:e.expressInstall||t.expressInstall,height:137,width:214,flashvars:{MMredirectURL:location.href,MMplayerType:t.activeX?"ActiveX":"PlugIn",MMdoctitle:document.title.slice(0,47)+" - Flash Player Installation"}}}attrs={data:e.swf,type:"application/x-shockwave-flash",id:e.id||"flash_"+Math.floor(999999999*Math.random()),width:e.width||320,height:e.height||180,style:e.style||""},l="undefined"!=typeof e.useEncode?e.useEncode:t.encodeParams,e.movie=e.swf,e.wmode=e.wmode||"opaque",delete e.fallback,delete e.hasVersion,delete e.hasVersionFail,delete e.height,delete e.id,delete e.swf,delete e.useEncode,delete e.width;var n=document.createElement("div");return n.innerHTML=["<object ",a(attrs),">",o(e),"</object>"].join(""),n.firstChild}},e.fn[t]=function(n){var i=this.find(s).andSelf().filter(s);if(/string|object/.test(typeof n))this.each(function(){var i,r=e(this);if(n=typeof n==s?n:{swf:n},n.fallback=this,i=e[t].create(n))r.children().remove(),r.html(i)});if("function"==typeof n)i.each(function(){var i=this,r="jsInteractionTimeoutMs";if(i[r]=i[r]||0,i[r]<660)if(i.clientWidth||i.clientHeight)n.call(i);else setTimeout(function(){e(i)[t](n)},i[r]+66)});return i}}(t,"flash",navigator.plugins["Shockwave Flash"]||window.ActiveXObject)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function n(){this.constructor=e}for(var i in t)if(__hasProp.call(t,i))e[i]=t[i];return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},__slice=[].slice;!function(e,t){if("object"==typeof exports)return module.exports=t();else if("function"==typeof define&&define.amd)return define("muplayer/core/engines/flashCore",["jquery","muplayer/core/cfg","muplayer/core/utils","muplayer/lib/Timer","muplayer/core/engines/engineCore","muplayer/lib/jquery.swfobject"],t);else return e._mu.FlashCore=t(_mu.cfg,_mu.utils,_mu.Timer,_mu.EngineCore)}(this,function(e,t,n,i,r){var a,o,s,l,u,d,f;return f=t.engine,o=f.EVENTS,l=f.STATES,a=f.ERRCODE,d=t.timerResolution,u={"-1":l.NOT_INIT,1:l.PREBUFFER,2:l.BUFFERING,3:l.PLAYING,4:l.PAUSE,5:l.STOP,6:l.END},s=function(t){function r(t){var i,r,a,o;this.opts=o=e.extend({},this.defaults,t),this._state=l.NOT_INIT,this._loaded=!1,this._queue=[],this._needFlashReady(["play","pause","stop","setCurrentPosition","_setUrl","_setVolume","_setMute"]),this._unexceptionGet(["getCurrentPosition","getLoadedPercent","getTotalTime"]),i=o.baseDir,r="muplayer_"+setTimeout(function(){},0),a=o.instanceName+"_"+r,n.namespace("engines")[a]=this,a="_mu.engines."+a,this.flash=e.flash.create({swf:i+o.swf,id:r,height:1,width:1,allowscriptaccess:"always",wmode:"transparent",expressInstaller:i+o.expressInstaller,flashvars:{_instanceName:a,_buffertime:5e3}}),o.$el.append(this.flash),this._initEvents()}return __extends(r,t),r.defaults={expressInstaller:"expressInstall.swf"},r.prototype._test=function(t){var n;if(n=this.opts,!e.flash.hasVersion(n.flashVer))return!1;else return t&&this.trigger(o.INIT_FAIL,this.engineType),!0},r.prototype._initEvents=function(){var e,t;return this.progressTimer=new i(d),this.positionTimer=new i(d),t=function(e){return function(){var t;if(t=e.getLoadedPercent(),e._lastPer!==t)e._lastPer=t,e.trigger(o.PROGRESS,t);if(1===t)return e.progressTimer.stop();else return void 0}}(this),e=function(e){return function(){var t;if(t=e.getCurrentPosition(),e._lastPos!==t)return e._lastPos=t,e.trigger(o.POSITIONCHANGE,t);else return void 0}}(this),this.progressTimer.every("100 ms",t),this.positionTimer.every("100 ms",e),this.on(o.STATECHANGE,function(t){return function(n){var i;switch(i=n.newState){case l.PREBUFFER:case l.PLAYING:t.progressTimer.start();break;case l.PAUSE:case l.STOP:t.progressTimer.stop();break;case l.END:t.progressTimer.reset()}switch(i){case l.PLAYING:return t.positionTimer.start();case l.PAUSE:case l.STOP:return t.positionTimer.stop(),e();case l.END:return t.positionTimer.reset()}}}(this))},r.prototype._needFlashReady=function(e){var t,i,r,a;for(a=[],i=0,r=e.length;r>i;i++)t=e[i],a.push(this[t]=n.wrap(this[t],function(e){return function(){var t,n;if(n=arguments[0],t=2<=arguments.length?__slice.call(arguments,1):[],e._loaded)n.apply(e,t);else e._pushQueue(n,t);return e}}(this)));return a},r.prototype._unexceptionGet=function(e){var t,i,r,a;for(a=[],i=0,r=e.length;r>i;i++)t=e[i],a.push(this[t]=n.wrap(this[t],function(e){return function(){var t,n;n=arguments[0],t=2<=arguments.length?__slice.call(arguments,1):[];try{return n.apply(e,t)}catch(i){return 0}}}(this)));return a},r.prototype._pushQueue=function(e,t){return this._queue.push([e,t])},r.prototype._fireQueue=function(){var e,t,n,i;for(i=[];this._queue.length;)n=this._queue.shift(),t=n[0],e=n[1],i.push(t.apply(this,e));return i},r.prototype.play=function(){return this.flash.f_play(),this},r.prototype.pause=function(){return this.flash.f_pause(),this},r.prototype.stop=function(){return this.flash.f_stop(),this},r.prototype._setUrl=function(e){return this.flash.f_load(e)},r.prototype.setUrl=function(e){if(e)this._setUrl(e),function(e){return function(){var t,n;return n=null,t=function(i){if(i.newState===l.PLAYING&&i.oldState===l.PREBUFFER)return n=setTimeout(function(){if(e.off(o.STATECHANGE,t),e.getCurrentPosition()<100)return e.setState(l.END),e.trigger(o.ERROR,a.MEDIA_ERR_SRC_NOT_SUPPORTED);else return void 0},2e3);else return clearTimeout(n)},e.off(o.STATECHANGE,t).on(o.STATECHANGE,t)}}(this)();return r.__super__.setUrl.call(this,e)},r.prototype.getState=function(e){return u[e]||this._state},r.prototype._setVolume=function(e){return this.flash.setData("volume",e)},r.prototype.setVolume=function(e){return this._setVolume(e),r.__super__.setVolume.call(this,e)},r.prototype._setMute=function(e){return this.flash.setData("mute",e)},r.prototype.setMute=function(e){return this._setMute(e),r.__super__.setMute.call(this,e)},r.prototype.setCurrentPosition=function(e){return this.flash.f_play(e),this},r.prototype.getCurrentPosition=function(){return this.flash.getData("position")},r.prototype.getLoadedPercent=function(){return this.flash.getData("loadedPct")},r.prototype.getTotalTime=function(){return this.flash.getData("length")},r.prototype._swfOnLoad=function(){return this._loaded=!0,setTimeout(function(e){return function(){return e._fireQueue()}}(this),0)},r.prototype._swfOnStateChange=function(e){return this.setState(this.getState(e))},r.prototype._swfOnErr=function(e){return this.setState(l.END),this.trigger(o.ERROR),"undefined"!=typeof console&&null!==console?console.error(e):void 0},r}(r)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function n(){this.constructor=e}for(var i in t)if(__hasProp.call(t,i))e[i]=t[i];return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};!function(e,t){if("object"==typeof exports)return module.exports=t();else if("function"==typeof define&&define.amd)return define("muplayer/core/engines/flashMP3Core",["jquery","muplayer/core/cfg","muplayer/core/engines/flashCore"],t);else return e._mu.FlashMP3Core=t(_mu.cfg,_mu.FlashCore)}(this,function(e,t,n){var i,r;return r=t.engine.TYPES,i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.defaults={swf:"muplayer_mp3.swf",instanceName:"MP3Core",flashVer:"9.0.0"},t.prototype._supportedTypes=["mp3"],t.prototype.engineType=r.FLASH_MP3,t}(n)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function n(){this.constructor=e}for(var i in t)if(__hasProp.call(t,i))e[i]=t[i];return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};!function(e,t){if("object"==typeof exports)return module.exports=t();else if("function"==typeof define&&define.amd)return define("muplayer/core/engines/flashMP4Core",["jquery","muplayer/core/cfg","muplayer/core/engines/flashCore"],t);else return e._mu.FlashMP4Core=t(_mu.cfg,_mu.FlashCore)}(this,function(e,t,n){var i,r;return r=t.engine.TYPES,i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.defaults={swf:"muplayer_mp4.swf",instanceName:"MP4Core",flashVer:"9.0.115"},t.prototype._supportedTypes=["m4a"],t.prototype.engineType=r.FLASH_MP4,t}(n)}),function(e,t){if("object"==typeof exports)return module.exports=t();else if("function"==typeof define&&define.amd)return define("muplayer/core/engines/engine",["jquery","muplayer/core/cfg","muplayer/core/utils","muplayer/lib/events","muplayer/core/engines/engineCore","muplayer/core/engines/audioCore","muplayer/core/engines/flashMP3Core","muplayer/core/engines/flashMP4Core"],t);else return e._mu.Engine=t(_mu.cfg,_mu.utils,_mu.Events,_mu.EngineCore,_mu.AudioCore,_mu.FlashMP3Core,_mu.FlashMP4Core)}(this,function($,cfg,utils,Events,EngineCore,AudioCore,FlashMP3Core,FlashMP4Core){var EVENTS,Engine,STATES,extReg,timerResolution,_ref;return _ref=cfg.engine,EVENTS=_ref.EVENTS,STATES=_ref.STATES,timerResolution=cfg.timerResolution,extReg=/\.(\w+)(\?.*)?$/,Engine=function(){function Engine(e){this.opts=$.extend({},this.defaults,e),this._initEngines()}return Engine.el='<div id="muplayer_container_{{DATETIME}}" style="width: 1px; height: 1px; overflow: hidden"></div>',Engine.prototype.defaults={engines:[{constructor:AudioCore},{constructor:FlashMP3Core},{constructor:FlashMP4Core}]},Engine.prototype._initEngines=function(){var $el,args,constructor,engine,i,opts,_i,_len,_ref1;for(this.engines=[],opts=this.opts,$el=$(Engine.el.replace(/{{DATETIME}}/g,+new Date)).appendTo("body"),_ref1=opts.engines,i=_i=0,_len=_ref1.length;_len>_i;i=++_i){engine=_ref1[i],constructor=engine.constructor,args=engine.args||{},args.baseDir=opts.baseDir,args.$el=$el;try{if(!$.isFunction(constructor))constructor=eval(constructor);engine=new constructor(args)}catch(_error){throw"Missing constructor: "+String(engine.constructor)}if(engine._test())this.engines.push(engine)}if(this.engines.length)return this.setEngine(this.engines[0]);else return this.setEngine(new EngineCore)},Engine.prototype.setEngine=function(e){var t,n,i,r,a,o,s;if(this._lastE={},o=function(e){return function(t){if(t.oldState!==e._lastE.oldState||t.newState!==e._lastE.newState)return e._lastE={oldState:t.oldState,newState:t.newState},e.trigger(EVENTS.STATECHANGE,t);else return void 0}}(this),r=function(e){return function(t){return e.trigger(EVENTS.POSITIONCHANGE,t)}}(this),a=function(e){return function(t){return e.trigger(EVENTS.PROGRESS,t)}}(this),n=function(e){return function(t){return e.trigger(EVENTS.ERROR,t)}}(this),t=function(e){return e.on(EVENTS.STATECHANGE,o).on(EVENTS.POSITIONCHANGE,r).on(EVENTS.PROGRESS,a).on(EVENTS.ERROR,n)},s=function(e){return e.off(EVENTS.STATECHANGE,o).off(EVENTS.POSITIONCHANGE,r).off(EVENTS.PROGRESS,a).on(EVENTS.ERROR,n)},!this.curEngine)return this.curEngine=t(e);else if(this.curEngine!==e)return i=this.curEngine,s(i).reset(),this.curEngine=t(e),this.curEngine.setVolume(i.getVolume()).setMute(i.getMute())},Engine.prototype.canPlayType=function(e){return-1!==$.inArray(e,this.getSupportedTypes())},Engine.prototype.getSupportedTypes=function(){var e,t,n,i,r;for(t=[],r=this.engines,n=0,i=r.length;i>n;n++)e=r[n],t=t.concat(e.getSupportedTypes());return t},Engine.prototype.switchEngineByType=function(e){var t,n,i,r,a;for(n=!1,a=this.engines,i=0,r=a.length;r>i;i++)if(t=a[i],t.canPlayType(e)){this.setEngine(t),n=!0;break}if(!n)return this.setEngine(this.engines[0]);else return void 0},Engine.prototype.reset=function(){return this.curEngine.reset(),this},Engine.prototype.setUrl=function(e){var t;if(extReg.test(e))t=RegExp.$1;if(this.canPlayType(t)){if(!this.curEngine.canPlayType(t))this.switchEngineByType(t)}else throw"Can not play with: "+t;return this.curEngine.setUrl(e),this},Engine.prototype.getUrl=function(){return this.curEngine.getUrl()},Engine.prototype.play=function(){return this.curEngine.play(),this},Engine.prototype.pause=function(){return this.curEngine.pause(),this.setState(STATES.PAUSE),this},Engine.prototype.stop=function(){return this.curEngine.stop(),this.setState(STATES.STOP),this},Engine.prototype.setState=function(e){return this.curEngine.setState(e),this},Engine.prototype.getState=function(){return this.curEngine.getState()},Engine.prototype.setMute=function(e){return this.curEngine.setMute(!!e),this},Engine.prototype.getMute=function(){return this.curEngine.getMute()},Engine.prototype.setVolume=function(e){if($.isNumeric(e)&&e>=0&&100>=e)this.curEngine.setVolume(e);
return this},Engine.prototype.getVolume=function(){return this.curEngine.getVolume()},Engine.prototype.setCurrentPosition=function(e){return e=~~e,this.curEngine.setCurrentPosition(e),this},Engine.prototype.getCurrentPosition=function(){return this.curEngine.getCurrentPosition()},Engine.prototype.getLoadedPercent=function(){return this.curEngine.getLoadedPercent()},Engine.prototype.getTotalTime=function(){return this.curEngine.getTotalTime()},Engine.prototype.getEngineType=function(){return this.curEngine.engineType},Engine.prototype.getState=function(){return this.curEngine.getState()},Engine}(),Events.mixTo(Engine),Engine}),function(e,t){if("object"==typeof exports)return module.exports=t();else if("function"==typeof define&&define.amd)return define("muplayer/player",["jquery","muplayer/core/cfg","muplayer/core/utils","muplayer/lib/events","muplayer/core/playlist","muplayer/core/engines/engine"],t);else return e._mu.Player=t(e._mu.cfg,e._mu.utils,e._mu.Events,e._mu.Playlist,e._mu.Engine)}(this,function(e,t,n,i,r,a){var o,s,l,u,d;return d=t.engine,o=d.EVENTS,l=d.STATES,u=n.time2str,s=function(){function n(t){var o,s;if(this.opts=s=e.extend({},n.defaults,t),o=s.baseDir,o===!1)o="";else if(!o)throw"baseDir must be set! Usually, it should point to the MuPlayer's dist directory.";if(o&&!o.endsWith("/"))o+="/";if(s.singleton){if(i)return i;i=this}this.playlist=new r({absoluteUrl:s.absoluteUrl}),this.playlist.setMode(s.mode),this._initEngine(new a({baseDir:o,engines:s.engines})),this.setMute(s.mute),this.setVolume(s.volume)}var i;return i=null,n.defaults={baseDir:"http://mu7.bdstatic.com/cms/app/muplayer/"+t.version.replace(/\./g,"_")+"/",mode:"loop",mute:!1,volume:80,singleton:!0,absoluteUrl:!0},n.prototype._initEngine=function(e){return this.engine=e.on(o.STATECHANGE,function(e){return function(t){var n;if(n=t.newState,e.trigger(n),n===l.END)return e.next(!0);else return void 0}}(this)).on(o.POSITIONCHANGE,function(e){return function(t){return e.trigger("timeupdate",t)}}(this)).on(o.PROGRESS,function(e){return function(t){return e.trigger("progress",t)}}(this)).on(o.ERROR,function(e){return function(t){return e.trigger("error",t)}}(this))},n.prototype.play=function(t){var n,i,r,a;if(t=~~t,n=e.Deferred(),i=this.engine,r=function(e){return function(){if(t)i.setCurrentPosition(t);else i.play();return e.trigger("player:play",t),n.resolve()}}(this),(a=this.getState())===l.NOT_INIT||a===l.STOP||a===l.END)this._fetch().done(function(e){return function(){return r()}}(this));else r();return n.promise()},n.prototype.pause=function(){return this.engine.pause(),this.trigger("player:pause"),this},n.prototype.stop=function(){return this.engine.stop(),this.trigger("player:stop"),this},n.prototype.replay=function(){return this.stop().play()},n.prototype.prev=function(){var e;if(e=this.getCur(),this.stop(),this.getSongsNum()&&this.playlist.prev())this.trigger("player:prev",{cur:e}),this.play();return this},n.prototype.next=function(e){var t;if(t=this.getCur(),this.stop(),this.getSongsNum()&&this.playlist.next())this.trigger("player:next",{auto:e,cur:t}),this.play();return this},n.prototype.getCur=function(){var e,t;if(t=this.playlist,e=t.cur,!e&&this.getSongsNum())e=t.list[0],t.setCur(e);return e+""},n.prototype.setCur=function(e){var t;if(t=this.playlist,!e&&this.getSongsNum())e=t.list[0];if(e&&this._sid!==e)t.setCur(e),this._sid=e,this.stop();return this},n.prototype.curPos=function(e){var t;if(t=this.engine.getCurrentPosition()/1e3,e)return u(t);else return t},n.prototype.duration=function(e){var t;if(t=this.engine.getTotalTime()/1e3,e)return u(t);else return t},n.prototype.add=function(e){if(e)this.playlist.add(e);return this.trigger("player:add",e),this},n.prototype.remove=function(e){if(e)this.playlist.remove(e);if(!this.getSongsNum())this.reset();return this.trigger("player:remove",e),this},n.prototype.reset=function(){return this.playlist.reset(),this.engine.reset(),this.trigger("player:reset"),this},n.prototype.getState=function(){return this.engine.getState()},n.prototype.setUrl=function(e){return this.engine.setUrl(e),this},n.prototype.getUrl=function(){return this.engine.getUrl()},n.prototype.setVolume=function(e){return this.engine.setVolume(e)},n.prototype.getVolume=function(){return this.engine.getVolume()},n.prototype.setMute=function(e){return this.engine.setMute(e),this},n.prototype.getMute=function(){return this.engine.getMute()},n.prototype.canPlayType=function(e){return this.engine.canPlayType(e)},n.prototype.getSongsNum=function(){return this.playlist.list.length},n.prototype.setMode=function(e){return this.playlist.setMode(e),this},n.prototype.getMode=function(){return this.playlist.mode},n.prototype._fetch=function(){var t;if(t=e.Deferred(),this.getUrl()===this.getCur())t.resolve();else setTimeout(function(e){return function(){return e.setUrl(e.getCur()),t.resolve()}}(this),0);return t.promise()},n}(),i.mixTo(s),s}),define("muplayer/player",["muplayer"],function(e){return e});