define("video/video.tpl",[],function(){return'<!-- target: video-title --><div class="ibx-inner-title"><a data-click=\'{"act": "card_video_link"}\' target="_blank" href="http://v.baidu.com" class="ibx-inner-title-ctx">百度视频</a><ul class="ibx-inner-title-tab"><li data-click=\'{"act": "card_video_my"}\' class="ibx-inner-title-tabitem ibx-video-my OP_LOG_TITLE">我的视频</li><li data-click=\'{"act": "card_video_hot"}\' class="ibx-inner-title-tabitem ibx-video-hotTop OP_LOG_TITLE">热门推荐</li></ul><a href="http://player.baidu.com/yingyin.html?fr=ibaidu" target="_blank" class="OP_LOG_TITLE card-enter-video-link" data-click=\'{"act": "card_video_enter_yingyin"}\'>下载百度影音 享受视听盛宴</a></div><div class="ibx-inner-content " id="ibx-video"><div class="ibx-loading"></div></div><!-- /target --><!-- ···························   视频pager   ····························· --><!-- target: video-pager --><span class="ibx-card-pager-prev"></span><!-- for: ${length} as ${item}, ${index} --><!-- if: ${index} == 0 --><span class="ibx-card-pager-item current" data-page="${index}"></span><!-- else --><span class="ibx-card-pager-item" data-page="${index}"></span><!-- /if --><!-- /for --><span class="ibx-card-pager-next"></span><!-- /target --><!-- ···························   视频empty   ····························· --><!-- target: video-empty --><div class="video-empty"><div class="video-empty-box"><span class="video-empty-detail"><div class="video-empty-tip">暂无最近观看的视频</div></span></div></div><!-- /target --><!-- ···························   视频最近看过   ····························· --><!-- target: my-video --><div class="ibx-inner-card-title"><span class="ibx-inner-card-title-ctx">最近看过</span><span class="ibx-inner-card-title-border"></span><div class="ibx-card-pager"></div></div><div class="my-video"><div class="ibx-loading"></div></div><div class="ibx-video-mask hidden"></div><!-- /target --><!-- ···························   视频最近看过list   ····························· --><!-- target: my-video-list --><!-- if: ${list.length} > 0 --><ul class="ibx-video-list" style="width: ${width}px;"><!-- for: ${list} as ${item}, ${index} --><li class="ibx-video-item"><a target="_blank" href="${item.url}"><img src="${item.img}_130x150.jpg" width="130" alt="${item.title}" /></a><div class="ibx-video-detail ibx-video-late"><a target="_blank" class="ibx-video-dtitle" href="${item.url}" title="${item.title}">${item.title}</a></div></li><!-- /for --></ul><!-- else --><!-- import: video-empty --><!-- /if --><!-- /target --><!-- ···························   视频热门推荐   ····························· --><!-- target: hot-video --><div class="hot-video-tab"><span class="hot-video-tab-item hot-video-tab-tv OP_LOG_TITLE" data-id="0" data-click=\'{"act": "card_video_hot"}\' >电视剧</span><span class="hot-video-tab-item hot-video-tab-movie OP_LOG_TITLE" data-id="1" data-click=\'{"act": "card_video_hot"}\' >电影</span><span class="hot-video-tab-item hot-video-tab-tvshow OP_LOG_TITLE" data-id="3" data-click=\'{"act": "card_video_hot"}\' >综艺娱乐</span><span class="hot-video-tab-item hot-video-tab-comic OP_LOG_TITLE" data-id="2" data-click=\'{"act": "card_video_hot"}\' >动漫卡通</span><div class="ibx-card-pager"></div></div><div id="hot-video" class="my-video"></div><div class="ibx-video-mask hidden"></div><!-- /target --><!-- ···························   视频热门推荐list   ····························· --><!-- target: video-list --><ul class="ibx-video-list" style="width: ${width}px;"><!-- for: ${list} as ${item} --><li class="ibx-video-item"><a target="_blank" href="${item.intro_url}"><img src="${item.imgv_url}_130x150.jpg" width="130" alt="${item.title}" /></a><div class="ibx-video-detail"><em class="ibx-video-dtitle-rank ${item.isfront}">${item.index}</em><a target="_blank" class="ibx-video-dtitle" href="${item.intro_url}" title="${item.title}">${item.title}</a><!-- if: ${item.actor[0].name} --><label class="ibx-video-actor" title="${item.actor[0].name}">${item.actor[0].name}</label><!-- /if --><!-- if: ${item.type[0].name} --><label class="ibx-video-tag" title="${item.type[0].name}">${item.type[0].name}</label><!-- /if --></div></li><!-- /for --></ul><!-- /target -->'}),define("video/main",["require","jquery","etpl","common/js/Remoter","common/js/config","./video.tpl"],function(require){function e(e){h.compile(m),u=d(e),u.html(h.render("video-title")),c=d("#ibx-video"),i(),n(),d(".ibx-video-my").trigger("click")}function t(){bdvRecordAPI.getVideos(function(e){var t=e||[],i=t.length,n=0;if(w)if(w=!1,!i)return d(".ibx-video-hotTop").trigger("click"),!1;else d(".ibx-video-my").addClass("current"),c.html(h.render("my-video"));T.boxWidth=Math.ceil(d(".my-video:eq(0)").width()),T.centerNum=Math.floor((T.boxWidth+10)/140),T.dataLength=i,n=o(i),d(".my-video").html(h.render("my-video-list",{list:t,width:n}))})}function i(){d("#ibx-mod-video").delegate(".ibx-inner-title-tabitem","click",function(){if(!d(this).hasClass("current"))if(c.html(h.render("loading")),d(this).hasClass("ibx-video-my"))if(_)d("#ibx-mod-video .ibx-inner-title-tabitem").removeClass("current"),d(this).addClass("current"),c.html(h.render("my-video")),t();else d.getScript(E,function(){_=!0,window.bdvRecordAPI.init({proxy:g.URL.VIEDO_PROXY}),t()});else d("#ibx-mod-video .ibx-inner-title-tabitem").removeClass("current"),d(this).addClass("current"),c.html(h.render("hot-video")),f=d("#hot-video"),d(".hot-video-tab-tv").trigger("click")}),d("#ibx-mod-video").delegate(".hot-video-tab-item","click",function(){if(!d(this).hasClass("current"))switch(d(".hot-video-tab-item").removeClass("current"),d(this).addClass("current"),f.html(h.render("loading")),s(),+d(this).attr("data-id")){case 0:y.remote().error(function(){f.html(h.render("loading-error"))});break;case 1:v.remote().error(function(){f.html(h.render("loading-error"))});break;case 2:b.remote().error(function(){f.html(h.render("loading-error"))});break;case 3:x.remote().error(function(){f.html(h.render("loading-error"))})}}),d("#ibx-mod-video").delegate("#hot-video .ibx-video-item","mouseenter",function(){d(this).addClass("onhover")}),d("#ibx-mod-video").delegate("#hot-video .ibx-video-item","mouseleave",function(){d(this).removeClass("onhover")}),d("#ibx-mod-video").delegate(".ibx-card-pager-item","click",function(){var e=d(this).closest(".ibx-card-pager"),t=+d(this).attr("data-page");if(!d(this).hasClass("current"))e.find(".ibx-card-pager-item").removeClass("current"),d(this).addClass("current"),d(".ibx-video-list").animate({left:-140*T.centerNum*t+"px"},1e3)}),d("#ibx-mod-video").delegate(".ibx-card-pager-prev","click",function(){var e=d(this).closest(".ibx-card-pager"),t=+e.find(".ibx-card-pager-item.current").attr("data-page")-1;t>-1&&e.find(".ibx-card-pager-item:eq("+t+")").trigger("click")}),d("#ibx-mod-video").on("click",".ibx-card-pager-next",function(){var e=d(this).closest(".ibx-card-pager"),t=+e.find(".ibx-card-pager-item.current").attr("data-page")+1;t!==e.find(".ibx-card-pager-item").length&&e.find(".ibx-card-pager-item:eq("+t+")").trigger("click")}),d(window).resize(function(){d(".ibx-video-list").css("left","0"),T.boxWidth=Math.ceil(d(".my-video:eq(0)").width()),T.centerNum=Math.floor((T.boxWidth+10)/140),T.dataLength&&o(T.dataLength)})}function n(){y.on("success",function(e){r(e)}),v.on("success",function(e){r(e)}),x.on("success",function(e){r(e)}),b.on("success",function(e){r(e)})}function r(e){if(e.length)a(e);else f.html(h.render("video-empty"))}function a(e){var t=d.extend(!0,[],e),i=t.length;T.boxWidth=Math.ceil(d(".my-video:eq(0)").width()),T.centerNum=Math.floor((T.boxWidth+10)/140),T.dataLength=i,width=o(i),d.each(t,function(e,t){t.index=(e+101+"").substr(1),t.isfront=e>2?"":"front"}),f.html(h.render("video-list",{list:t,width:width}))}function o(e){var t=Math.ceil(e/T.centerNum);if(e)d("#ibx-video .ibx-card-pager").html(h.render("video-pager",{length:new Array(t)})),d(".ibx-video-mask").toggleClass("hidden",1===t);return t*T.boxWidth}function s(){d(".ibx-video-mask").addClass("hidden"),d("#ibx-video .ibx-card-pager").html("")}function l(){u.empty()}var u,c,f,d=require("jquery"),h=require("etpl"),p=require("common/js/Remoter"),g=require("common/js/config"),m=require("./video.tpl"),y=new p("HOME_VIDEO_TV"),v=new p("HOME_VIDEO_MOVIE"),b=new p("HOME_VIDEO_COMIC"),x=new p("HOME_VIDEO_TVSHOW"),_=!1,w=!0,T={},E="http://list.video.baidu.com/pc_static/open/record/bdv-record-api.js";return{render:e,dispose:l}}),define("video",["video/main"],function(e){return e});