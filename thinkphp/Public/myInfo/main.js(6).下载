define("xinwen/main",["require","jquery","common/js/Remoter","etpl","./xinwen.tpl"],function(require){function e(e){f.compile(d),u(e).html(f.render("xinwen-title")),t()}function t(){u(".ibx-xinwen-pernews").on("click",function(){l(u(this)),u("#ibx-xinwen").html(f.render("xinwen-loading")),h.remote()}),u(".ibx-xinwen-hot").on("click",function(){l(u(this)),u("#ibx-xinwen").html(f.render("xinwen-hot")),p.remote(),g.remote()}),u(".ibx-xinwen-baijia").on("click",function(){l(u(this)),u("#ibx-xinwen").html(f.render("xinwen-loading")),m.remote()}),i(),u(".ibx-xinwen-pernews").trigger("click"),s()}function i(){h.on("success",function(e){if(u(".ibx-xinwen-pernews").hasClass("current"))b=e,v=440,u("#ibx-xinwen").html(f.render("xinwen-pernews")),r()}).on("fail",function(){u("#ibx-xinwen").html(f.render("loading-error"))}),p.on("success",function(e){if(u(".ibx-xinwen-hot").hasClass("current"))e.news.length=6,u.each(e.news,function(e,t){if(t.index=e+1,t.index<10)t.index="0"+t.index}),u("#xinwen-hotnews-container").html(f.render("xinwen-hotnews",e))}).on("fail",function(){u("#xinwen-hotnews-container").html(f.render("loading-error"))}),g.on("success",function(e){if(u(".ibx-xinwen-hot").hasClass("current")){e.news.length=18;var t=[[],[],[]];u.each(e.news,function(e,t){if(t.index=e+1,t.index<10)t.index="0"+t.index});var i=6;u.each(t,function(t,n){for(var r=t*i;i*(t+1)>r;r++)n.push(e.news[r])}),u("#xinwen-hottopic-container").html(f.render("xinwen-hottopic",{news:t}))}}).on("fail",function(){u("#xinwen-hottopic-container").html(f.render("loading-error"))}),m.on("success",function(e){if(u(".ibx-xinwen-baijia").hasClass("current"))e.news.article.length=5,u.each(e.news.article,function(e,t){if(t.index=e+1,t.index<10)t.index="0"+t.index}),u("#ibx-xinwen").html(f.render("xinwen-baijia",e.news)),n()}).on("fail",function(){u("#ibx-xinwen").html(f.render("loading-error"))})}function n(){var e=u(".xinwen-article-item"),t=u(".first-item");e.hover(function(){var e=u(this);if(!e.hasClass("first-item"))t.removeClass("first-item")},function(){var e=u(this);if(!e.hasClass("first-item"))t.addClass("first-item")})}function r(){var e=a();y.boxWidth=Math.ceil(u("#xinwen-pernews-main").width()+20),y.centerNum=Math.floor(y.boxWidth/440),y.dataLength=e.list.length;var t=o(y.dataLength);u("#xinwen-pernews-main").html(f.render("xinwen-pernews-list",{width:t,list:e.list}))}function a(){for(var e=[],t=3,i=Math.ceil(b.news.length/t),n=0;i>n;n++)e[n]=[],e[n].push(b.news[n*t]),e[n].push(b.news[n*t+1]),e[n].push(b.news[n*t+2]);return{list:e}}function o(e){var t=Math.ceil(e/y.centerNum);if(e)u("#ibx-xinwen .ibx-card-pager").html(f.render("xinwen-pager",{length:new Array(t)})),u(".ibx-xinwen-mask").toggleClass("hidden",1===t);return t*y.boxWidth}function s(){u("#ibx-mod-xinwen").on("click",".ibx-card-pager-item",function(){var e=u(this).closest(".ibx-card-pager"),t=+u(this).attr("data-page");if(!u(this).hasClass("current"))e.find(".ibx-card-pager-item").removeClass("current"),u(this).addClass("current"),u(".xinwen-normal-list").animate({left:-v*y.centerNum*t+"px"},1e3)}),u("#ibx-mod-xinwen").on("click",".ibx-card-pager-prev",function(){var e=u(this).closest(".ibx-card-pager"),t=+e.find(".ibx-card-pager-item.current").attr("data-page")-1;t>-1&&e.find(".ibx-card-pager-item:eq("+t+")").trigger("click")}),u("#ibx-mod-xinwen").on("click",".ibx-card-pager-next",function(){var e=u(this).closest(".ibx-card-pager"),t=+e.find(".ibx-card-pager-item.current").attr("data-page")+1;t!==e.find(".ibx-card-pager-item").length&&e.find(".ibx-card-pager-item:eq("+t+")").trigger("click")})}function l(e){u("#ibx-mod-xinwen .ibx-inner-title-tabitem").removeClass("current"),e.addClass("current")}var u=require("jquery"),c=require("common/js/Remoter"),f=require("etpl"),d=require("./xinwen.tpl"),h=new c("HOME_XINWEN_PERNEWS"),p=new c("HOME_XINWEN_HOTNEWS"),g=new c("HOME_XINWEN_HOTTOPIC"),m=new c("HOME_XINWEN_BAIJIA"),y={},v=0,b=null;return u(window).resize(function(){u(".xinwen-normal-list").css("left","0px");var e=u("#ibx-xinwen").width();y.boxWidth=Math.ceil(e),y.centerNum=Math.floor((y.boxWidth+20)/v),y.dataLength&&o(y.dataLength)}),{render:e}}),define("xinwen",["xinwen/main"],function(e){return e});