define("zxui/log",["require","./lib"],function(require){var e=require("./lib"),t=function(e){try{return new Function("return ("+e+")")()}catch(t){return{}}},i=function(){var t=[];return function(i){var n=t.push(document.createElement("img"))-1;t[n].onload=t[n].onerror=function(){t[n]=t[n].onload=t[n].onerror=null,delete t[n]};var r=a.action+e.toQueryString(i);t[n].src=r+"&"+(+new Date).toString(36),exports.fire("send",{url:r})}}(),n=function(i,n,a){var s,l,u=0,f=n,d=[],c=f.getAttribute("data-rsv");if(c)i.rsv=e.extend(i,{rsv:t(c)});for(var h,p=0,g=/\bOP_LOG_(TITLE|LINK|IMG|BTN|INPUT|OTHERS)\b/i;f!==a;){if("1"===f.getAttribute("data-nolog")){u=1;break}if(h=f.getAttribute("data-click"))i=e.extend(t(h),i);if(c=f.getAttribute("data-rsv"))i.rsv=e.extend(t(c),i.rsv);if(f.href)l=f.href,s="link";if("link"===s&&"H3"===f.tagName)s="title";if(g.test(f.className))s=RegExp.$1.toLowerCase();var y=1;if(f.previousSibling){var m=f.previousSibling;do{if(1===m.nodeType&&m.tagName===f.tagName)y++;m=m.previousSibling}while(m)}d[p++]=f.tagName+(y>1?y:""),f=f.parentNode}if(n!==a)if(h=a.getAttribute("data-click"))i=e.extend(t(h),i);if(u)return!u;d.reverse();var v=n.tagName.toLowerCase();if(!s&&/^a|img|input|button|select|datalist|textarea$/.test(v))s={a:"link"}[v]||"input",l=n.href||n.src||l;if(s=n.getAttribute("data-type")||s,!s)return!1;if(l)i.url=l;return o(i,n,"p1"),o(i,n,"act"),o(i,n,"item"),o(i,n,"mod",a.id),r(i,n,s,v,d,p),i.xpath=d.join("-").toLowerCase()+"("+s+")",i},r=function(t,i,n,r,o,a){var s="";if("input"===n)if(/input|textarea/.test(r)){if(s=i.value,i.type&&"password"===i.type.toLowerCase())s=""}else if(/select|datalist/.test(r)){if(i.children.length>0){var l=i.selectedIndex||0;s=i.children[l>-1?l:0].innerHTML}}else s=i.innerHTML||i.value||"";else{if("img"===r)s=i.title;if(!s)for(var u=i,f=a;f>0;)if(f--,/^a\d*\b/i.test(o[f])){url=u.href,s=u.innerHTML;break}else{if(u.className&&/\bOP_LOG_[A-Z]+\b/.test(u.className)){s=u.innerHTML;break}u=u.parentNode}}t.txt=e.trim(s).replace(/<[^>]+?>/g,"")},o=function(e,t,i,n){e[i]=t.getAttribute("data-"+i)||e[i]||n||"-"},a={action:"http://nsclick.baidu.com/v.gif?",main:"result-op",title:"OP_LOG_TITLE",link:"OP_LOG_LINK",img:"OP_LOG_IMG",btn:"OP_LOG_BTN",input:"OP_LOG_INPUT",others:"OP_LOG_OTHERS",data:{url:location.href,pid:"-",cat:"-",page:"-",fr:"-",pvid:"-",rqid:"-",qid:"-",psid:"-",sid:"-",pn:"-",act:"-",mod:"-",item:"-",p1:"-",xpath:"-",f:"-",txt:"-",q:"-",rsv:null}},s=function(i,n){var r=t(i.getAttribute("data-click"));r.p1=n,i.setAttribute("data-click",e.stringify(r))},l=function(r,o){var l=o||e.getTarget(r),u=a.main,f=e.hasClass(l,u)?l:e.getAncestorByClass(l,u);if(f&&"1"!==f.getAttribute("data-nolog")){var d=l.getAttribute("data-click");if(d)d=t(d);if(d=n(d||{},l,f)){if(a.data)d=e.extend(e.extend({},a.data),d);if(!("p1"in d))e.each(e.q(a.main),function(e,t){if(e===f)d.p1=t+1;s(e,t+1)});exports.fire("click",{data:d,target:l,main:f}),i(d)}}},exports={config:function(t){return e.extend(a,t),this},start:function(){return e.on(document,"mousedown",l),this.fire("start"),this},stop:function(){return e.un(document,"mousedown",l),this},click:function(e){return l(null,e),this},fill:function(i,n){for(var r,o,a=0;r=i[a++];){if(o=r.getAttribute("data-click"))n=e.extend(t(o),n);r.setAttribute("data-click",e.stringify(n))}return this},live:function(t){var i=this.map;if(!i)i=this.map={},this.on("click",function(e){var t=e.data.mod;if(t&&t in i)i[t](e)});return e.extend(i,t),this},send:function(t){return i(e.extend(e.clone(a.data),t)),this}};return e.extend(exports,e.clone(e.observable)),exports});