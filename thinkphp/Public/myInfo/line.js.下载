define("echarts/chart/line",["require","../component/base","./calculableBase","../config","../util/ecData","zrender/tool/color","zrender/shape","../util/shape/halfSmoothPolygon","../chart"],function(require){function e(e,a,i,r){function l(){w={},I.selectedMap={};for(var e,t,i,l,o={top:[],bottom:[],left:[],right:[]},s=0,h=C.length;h>s;s++)if(C[s].type==I.type)if(C[s]=I.reformOption(C[s]),e=C[s].xAxisIndex,t=C[s].yAxisIndex,i=r.xAxis.getAxis(e),l=r.yAxis.getAxis(t),i.type==b.COMPONENT_TYPE_AXIS_CATEGORY)o[i.getPosition()].push(s);else if(l.type==b.COMPONENT_TYPE_AXIS_CATEGORY)o[l.getPosition()].push(s);for(var d in o)if(o[d].length>0)n(d,o[d]);for(var s=0,h=I.shapeList.length;h>s;s++)I.shapeList[s].id=a.newShapeId(I.type),a.addShape(I.shapeList[s])}function n(e,t){var a=o(t),i=a.locationMap,r=a.maxDataLength;if(0!==r&&0!==i.length)switch(e){case"bottom":case"top":s(r,i);break;case"left":case"right":h(r,i)}}function o(e){for(var t,i,l,n,o=0,s={},h="__kener__stack__",d=r.legend,p=[],f=0,y=0,c=e.length;c>y;y++){if(t=C[e[y]],l=t.name,T[e[y]]=T[e[y]]||I.deepQuery([t],"symbol")||_[y%_.length],d){if(I.selectedMap[l]=d.isSelected(l),M[e[y]]=d.getColor(l),n=d.getItemShape(l))n.shape="icon",n.style.iconType="legendLineIcon",n.style.symbol=T[e[y]],d.setItemShape(l,n)}else I.selectedMap[l]=!0,M[e[y]]=a.getColor(e[y]);if(I.selectedMap[l])if(i=t.stack||h+e[y],"undefined"==typeof s[i])s[i]=o,p[o]=[e[y]],o++;else p[s[i]].push(e[y]);f=Math.max(f,t.data.length)}return{locationMap:p,maxDataLength:f}}function s(e,t){for(var a,l,n,o,s,h,p,y,c,u,g=t[0][0],m=C[g],v=m.xAxisIndex,S=r.xAxis.getAxis(v),x={},b=0,L=e;L>b&&"undefined"!=typeof S.getNameByIndex(b);b++){n=S.getCoordByIndex(b);for(var A=0,Q=t.length;Q>A;A++){a=C[t[A][0]].yAxisIndex||0,l=r.yAxis.getAxis(a),h=s=y=p=l.getCoord(0);for(var M=0,_=t[A].length;_>M;M++)if(g=t[A][M],m=C[g],c=m.data[b],u="undefined"!=typeof c?"undefined"!=typeof c.value?c.value:c:"-",x[g]=x[g]||[],"-"!=u){if(o=l.getCoord(u),u>=0)s-=h-o,o=s;else if(0>u)p+=o-y,o=p;x[g].push([n,o,b,S.getNameByIndex(b),n,h])}else if(x[g].length>0)w[g]=w[g]||[],w[g].push(x[g]),x[g]=[]}s=r.grid.getY();for(var T,A=0,Q=t.length;Q>A;A++)for(var M=0,_=t[A].length;_>M;M++)if(g=t[A][M],m=C[g],c=m.data[b],u="undefined"!=typeof c?"undefined"!=typeof c.value?c.value:c:"-","-"==u){if(I.deepQuery([c,m,i],"calculable"))T=I.deepQuery([c,m],"symbolSize"),s+=2*T+5,o=s,I.shapeList.push(f(g,b,S.getNameByIndex(b),n,o,"horizontal"))}else;}for(var k in x)if(x[k].length>0)w[k]=w[k]||[],w[k].push(x[k]),x[k]=[];d(w,S,"horizontal")}function h(e,t){for(var a,l,n,o,s,h,p,y,c,u,g=t[0][0],m=C[g],v=m.yAxisIndex,S=r.yAxis.getAxis(v),x={},b=0,L=e;L>b&&"undefined"!=typeof S.getNameByIndex(b);b++){o=S.getCoordByIndex(b);for(var A=0,Q=t.length;Q>A;A++){a=C[t[A][0]].xAxisIndex||0,l=r.xAxis.getAxis(a),h=s=y=p=l.getCoord(0);for(var M=0,_=t[A].length;_>M;M++)if(g=t[A][M],m=C[g],c=m.data[b],u="undefined"!=typeof c?"undefined"!=typeof c.value?c.value:c:"-",x[g]=x[g]||[],"-"!=u){if(n=l.getCoord(u),u>=0)s+=n-h,n=s;else if(0>u)p-=y-n,n=p;x[g].push([n,o,b,S.getNameByIndex(b),h,o])}else if(x[g].length>0)w[g]=w[g]||[],w[g].push(x[g]),x[g]=[]}s=r.grid.getXend();for(var T,A=0,Q=t.length;Q>A;A++)for(var M=0,_=t[A].length;_>M;M++)if(g=t[A][M],m=C[g],c=m.data[b],u="undefined"!=typeof c?"undefined"!=typeof c.value?c.value:c:"-","-"==u){if(I.deepQuery([c,m,i],"calculable"))T=I.deepQuery([c,m],"symbolSize"),s-=2*T+5,n=s,I.shapeList.push(f(g,b,S.getNameByIndex(b),n,o,"vertical"))}else;}for(var k in x)if(x[k].length>0)w[k]=w[k]||[],w[k].push(x[k]),x[k]=[];d(w,S,"vertical")}function d(e,t,a){for(var r,l,n,o,s,h,d,f,c,u,g,m,v=C.length-1;v>=0;v--)if(c=C[v],g=e[v],c.type==I.type&&"undefined"!=typeof g){r=M[v],l=I.deepQuery([c],"itemStyle.normal.lineStyle.width"),n=I.deepQuery([c],"itemStyle.normal.lineStyle.type"),o=I.deepQuery([c],"itemStyle.normal.lineStyle.color"),s=I.deepQuery([c],"itemStyle.normal.color"),h=I.deepQuery([c],"itemStyle.emphasis.color"),d="undefined"!=typeof I.deepQuery([c],"itemStyle.normal.areaStyle"),f=I.deepQuery([c],"itemStyle.normal.areaStyle.color");for(var S=0,x=g.length;x>S;S++){m=g[S];for(var b=0,L=m.length;L>b;b++)if(u=c.data[m[b][2]],I.deepQuery([u,c],"showAllSymbol")||t.isMainAxis(m[b][2])&&"none"!=I.deepQuery([u,c],"symbol")||I.deepQuery([u,c,i],"calculable"))I.shapeList.push(y(v,m[b][2],m[b][3],m[b][0],m[b][1],I.deepQuery([u],"itemStyle.normal.color")||s||r,I.deepQuery([u],"itemStyle.emphasis.color")||h||s||r,l,I.deepQuery([u,c],"symbolRotate"),a));if(I.shapeList.push({shape:"brokenLine",zlevel:Q,style:{pointList:m,strokeColor:o||s||r,lineWidth:l,lineType:n,smooth:p(c.smooth),shadowColor:I.deepQuery([c],"itemStyle.normal.lineStyle.shadowColor"),shadowBlur:I.deepQuery([c],"itemStyle.normal.lineStyle.shadowBlur"),shadowOffsetX:I.deepQuery([c],"itemStyle.normal.lineStyle.shadowOffsetX"),shadowOffsetY:I.deepQuery([c],"itemStyle.normal.lineStyle.shadowOffsetY")},hoverable:!1,_main:!0,_seriesIndex:v,_orient:a}),d)I.shapeList.push({shape:"halfSmoothPolygon",zlevel:Q,style:{pointList:m.concat([[m[m.length-1][4],m[m.length-1][5]-2],[m[0][4],m[0][5]-2]]),brushType:"fill",smooth:p(c.smooth),color:f?f:A.alpha(r,.5)},hoverable:!1,_main:!0,_seriesIndex:v,_orient:a})}}}function p(e){if(e)return.3;else return 0}function f(e,t,a,i,r,l){var n=C[e].calculableHolderColor||b.calculableHolderColor,o=y(e,t,a,i,r,n,M[e],2,0,l);return o.hoverable=!1,o.draggable=!1,o.style.text=void 0,o}function y(e,t,a,r,l,n,o,s,h,d){var p=C[e],f=p.data[t],y=I.deepQuery([f],"symbol")||T[e]||"cricle",c=I.deepQuery([f,p],"symbolSize"),u={shape:"icon",zlevel:Q+1,style:{iconType:y.replace("empty","").toLowerCase(),x:r-c,y:l-c,width:2*c,height:2*c,brushType:"both",color:y.match("empty")?"#fff":n,strokeColor:n,lineWidth:2*s},highlightStyle:{color:y.match("empty")?"#fff":o,strokeColor:o,lineWidth:2*s+2},clickable:!0};if(y.match("image"))u.style.image=y.replace(new RegExp("^image:\\/\\/"),""),u.shape="image";if("undefined"!=typeof h)u.rotation=[h*Math.PI/180,r,l];if(y.match("star"))u.style.iconType="star",u.style.n=y.replace("empty","").replace("star","")-0||5;if("none"==y)u.invisible=!0,u.hoverable=!1;if(I.deepQuery([f,p,i],"calculable"))I.setCalculable(u),u.draggable=!0;if(u=I.addLabel(u,C[e],C[e].data[t],a,"vertical"==d?"horizontal":"vertical"),y.match("empty")){if("undefined"==typeof u.style.textColor)u.style.textColor=u.style.strokeColor;if("undefined"==typeof u.highlightStyle.textColor)u.highlightStyle.textColor=u.highlightStyle.strokeColor}return L.pack(u,C[e],e,C[e].data[t],t,a),u._x=r,u._y=l,u._dataIndex=t,u._seriesIndex=e,u}function c(e,t){r=t,u(e)}function u(e){if(e)i=e,C=i.series;I.clear(),l()}function g(e,t){for(var a,i,r,l,n,o,s,h,d=e.seriesIndex,p=e.dataIndex,f=d.length;f--;)if(a=w[d[f]]){r=C[d[f]],l=[r],h=M[d[f]],n=I.deepQuery(l,"itemStyle.normal.lineStyle.width"),o=I.deepQuery(l,"itemStyle.normal.color"),s=I.deepQuery(l,"itemStyle.emphasis.color");for(var c,u,g=0,m=a.length;m>g;g++){i=a[g];for(var v=0,S=i.length;S>v;v++)if(p==i[v][2])u=r.data[i[v][2]],c=y(d[f],i[v][2],i[v][3],i[v][0],i[v][1],I.deepQuery([u],"itemStyle.normal.color")||o||h,I.deepQuery([u],"itemStyle.emphasis.color")||s||o||h,n,I.deepQuery([u,r],"symbolRotate"),"horizontal"),t.push(c)}}}function m(e){for(var t={},i=0,r=e.length;r>i;i++)t[e[i][0]]=e[i];for(var l,n,o,s,h,d,p,i=I.shapeList.length-1;i>=0;i--)if(h=I.shapeList[i]._seriesIndex,t[h]&&!t[h][3]){if(I.shapeList[i]._main){if(d=I.shapeList[i].style.pointList,n=Math.abs(d[0][0]-d[1][0]),s=Math.abs(d[0][1]-d[1][1]),p="horizontal"==I.shapeList[i]._orient,t[h][2]){if("polygon"==I.shapeList[i].shape){var f=d.length;I.shapeList[i].style.pointList[f-3]=d[f-2],p?I.shapeList[i].style.pointList[f-3][0]=d[f-4][0]:I.shapeList[i].style.pointList[f-3][1]=d[f-4][1],I.shapeList[i].style.pointList[f-2]=d[f-1]}I.shapeList[i].style.pointList.pop(),p?(l=n,o=0):(l=0,o=-s)}else{if(I.shapeList[i].style.pointList.shift(),"polygon"==I.shapeList[i].shape){var y=I.shapeList[i].style.pointList.pop();p?y[0]=d[0][0]:y[1]=d[0][1],I.shapeList[i].style.pointList.push(y)}p?(l=-n,o=0):(l=0,o=s)}a.modShape(I.shapeList[i].id,{style:{pointList:I.shapeList[i].style.pointList}})}else if(t[h][2]&&I.shapeList[i]._dataIndex==C[h].data.length-1){a.delShape(I.shapeList[i].id);continue}else if(!t[h][2]&&0===I.shapeList[i]._dataIndex){a.delShape(I.shapeList[i].id);continue}a.animate(I.shapeList[i].id,"").when(500,{position:[l,o]}).start()}}function v(){for(var e,t,r,l=I.deepQuery([i],"animationDuration"),n=I.deepQuery([i],"animationEasing"),o=0,s=0,h=I.shapeList.length;h>s;s++)if(I.shapeList[s]._main){if(r=C[I.shapeList[s]._seriesIndex],o+=1,e=I.shapeList[s].style.pointList[0][0],t=I.shapeList[s].style.pointList[0][1],"horizontal"==I.shapeList[s]._orient)a.modShape(I.shapeList[s].id,{scale:[0,1,e,t]});else a.modShape(I.shapeList[s].id,{scale:[1,0,e,t]});a.animate(I.shapeList[s].id,"").when((I.deepQuery([r],"animationDuration")||l)+100*o,{scale:[1,1,e,t]}).start(I.deepQuery([r],"animationEasing")||n)}else e=I.shapeList[s]._x||0,t=I.shapeList[s]._y||0,a.modShape(I.shapeList[s].id,{scale:[0,0,e,t]}),a.animate(I.shapeList[s].id,"").when(l,{scale:[1,1,e,t]}).start("QuinticOut")}var S=require("../component/base");S.call(this,a);var x=require("./calculableBase");x.call(this,a,i);var b=require("../config"),L=require("../util/ecData"),A=require("zrender/tool/color"),I=this;I.type=b.CHART_TYPE_LINE;var C,Q=I.getZlevelBase(),w={},M={},_=["circle","rectangle","triangle","diamond","emptyCircle","emptyRectangle","emptyTriangle","emptyDiamond"],T={};require("zrender/shape").get("icon").define("legendLineIcon",t),I.init=c,I.refresh=u,I.ontooltipHover=g,I.addDataAnimation=m,I.animation=v,c(i,r)}function t(e,t){var a=t.x,i=t.y,r=t.width,l=t.height,n=l/2;if(e.moveTo(a,i+n),e.lineTo(a+r,i+n),t.symbol.match("empty"))e.fillStyle="#fff";t.brushType="both";var o=t.symbol.replace("empty","").toLowerCase();if(o.match("star"))n=o.replace("star","")-0||5,i-=1,o="star";else if("rectangle"==o||"arrow"==o)a+=(r-l)/2,r=l;if(o=require("zrender/shape").get("icon").get(o))o(e,{x:a+3,y:i+3,width:r-6,height:l-6,n:n})}return require("../util/shape/halfSmoothPolygon"),require("../chart").define("line",e),e});