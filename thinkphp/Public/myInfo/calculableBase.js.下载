define("echarts/chart/calculableBase",["require","../util/ecData","../util/accMath","zrender/tool/util"],function(require){function e(e,t){function a(e){return e.ondragover=d.shapeHandler.ondragover,e.ondragend=d.shapeHandler.ondragend,e.ondrop=d.shapeHandler.ondrop,e}function i(e,a){if(d.isDrop&&e.target){var i=e.target,r=e.dragged,s=l.get(i,"seriesIndex"),o=l.get(i,"dataIndex"),h=t.series[s].data[o]||"-";if(h.value)if("-"!=h.value)t.series[s].data[o].value=n.accAdd(t.series[s].data[o].value,l.get(r,"value"));else t.series[s].data[o].value=l.get(r,"value");else if("-"!=h)t.series[s].data[o]=n.accAdd(t.series[s].data[o],l.get(r,"value"));else t.series[s].data[o]=l.get(r,"value");a.dragIn=a.dragIn||!0,d.isDrop=!1}}function r(e,a){if(d.isDragend&&e.target){var i=e.target,r=l.get(i,"seriesIndex"),s=l.get(i,"dataIndex");t.series[r].data[s]="-",a.dragOut=!0,a.needRefresh=!0,d.isDragend=!1}}function s(e,t){var a=e.selected;for(var i in d.selectedMap)if(d.selectedMap[i]!=a[i])return void(t.needRefresh=!0)}var l=require("../util/ecData"),n=require("../util/accMath"),o=require("zrender/tool/util"),d=this;d.selectedMap={},d.shapeHandler={onclick:function(){d.isClick=!0},ondragover:function(e){var t=o.clone(e.target);t.highlightStyle={text:"",r:t.style.r+5,brushType:"stroke",strokeColor:d.zr.getCalculableColor(),lineWidth:(t.style.lineWidth||1)+12},d.zr.addHoverShape(t)},ondrop:function(e){if("undefined"!=typeof l.get(e.dragged,"data"))d.isDrop=!0},ondragend:function(){d.isDragend=!0}},d.setCalculable=a,d.ondrop=i,d.ondragend=r,d.onlegendSelected=s}return e});