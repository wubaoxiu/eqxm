define("chuanke/main",["require","jquery","common/js/Remoter","etpl","./chuanke.tpl"],function(require){function e(e){p.compile(g),c(e).html(p.render("chuanke-title")),t()}function t(){c(".ibx-chuanke-mycourse").on("click",function(){d(c(this)),f(),m.remote()}),c(".ibx-chuanke-live").on("click",function(){d(c(this)),f(),y.remote()}),c(".ibx-chuanke-elite").on("click",function(){d(c(this)),f(),v.remote()}),c(".ibx-chuanke-school").on("click",function(){d(c(this)),f(),x.remote()}),i(),c(".ibx-chuanke-elite").trigger("click"),u()}function i(){m.on("success",function(e){if(c(".ibx-chuanke-mycourse").hasClass("current"))if(s("mycourse",e.MoreUrl),!e.DataList.length)c("#ibx-chuanke").html(p.render("chuanke-mycourse-empty"));else w=194,E=e,c("#ibx-chuanke").html(p.render("chuanke-mycourse")),n()}).on("fail",function(){c("#ibx-chuanke").html(p.render("loading-error"))}),y.on("success",function(e){if(c(".ibx-chuanke-live").hasClass("current"))s("live",e.MoreUrl),w=194,M=e,c("#ibx-chuanke").html(p.render("chuanke-live")),r()}).on("fail",function(){c("#ibx-chuanke").html(p.render("loading-error"))}),v.on("success",function(e){if(c(".ibx-chuanke-elite").hasClass("current"))w=194,S=e,c("#ibx-chuanke").html(p.render("chuanke-elite",e)),c(".chuanke-elite-tab-item").click(function(){c(".chuanke-elite-tab-item").removeClass("current"),c(this).addClass("current");var e=c(this).attr("data-id"),t="";c.each(S.CateList,function(i,n){if(n.CateID==e)t=n.CateUrl}),s("elite",t),c("#chuanke-elite-main").html(p.render("chuanke-loading")),a(e)}),c(".chuanke-elite-tab-item").eq(0).trigger("click")}).on("fail",function(){c("#ibx-chuanke").html(p.render("loading-error"))}),b.on("success",function(e){function t(){var e=c(".chuanke-hot-list-item").width();c(".chuanke-hot-list").animate({left:-(T*e)+"px"},1e3)}if(c(".ibx-chuanke-hot").hasClass("current"))s("hot",e.MoreUrl),c("#ibx-chuanke").html(p.render("chuanke-hot",{list:e.DataList})),c(".chuanke-hot-list-prev").click(function(){if(T--,T>=0)t();else T=0}),c(".chuanke-hot-list-next").click(function(){if(T++,T<=c(".chuanke-hot-list-item").length-1)t();else T=c(".chuanke-hot-list-item").length-1})}).on("fail",function(){c("#ibx-chuanke").html(p.render("loading-error"))}),x.on("success",function(e){if(c(".ibx-chuanke-school").hasClass("current"))s("school",e.MoreUrl),w=210,k=e,c("#ibx-chuanke").html(p.render("chuanke-school")),o()}).on("fail",function(){c("#ibx-chuanke").html(p.render("loading-error"))})}function n(){_.boxWidth=Math.ceil(c("#chuanke-mycourse-main").width()+10),_.centerNum=Math.floor(_.boxWidth/194),_.dataLength=E.DataList.length;var e=l(_.dataLength);c("#chuanke-mycourse-main").html(p.render("chuanke-mycourse-list",{width:e,list:E.DataList}))}function r(){_.boxWidth=Math.ceil(c("#chuanke-live-main").width()+10),_.centerNum=Math.floor(_.boxWidth/194),_.dataLength=M.DataList.length;var e=l(_.dataLength);c("#chuanke-live-main").html(p.render("chuanke-live-list",{width:e,list:M.DataList}))}function a(e){var t=S.DataList[e];_.boxWidth=Math.ceil(c("#chuanke-elite-main").width()+10),_.centerNum=Math.floor(_.boxWidth/194),_.dataLength=t.length;var i=l(_.dataLength);c("#chuanke-elite-main").html(p.render("chuanke-elite-list",{width:i,list:t}))}function o(){var e=k;_.boxWidth=Math.ceil(c("#chuanke-school-main").width()+10),_.centerNum=Math.floor(_.boxWidth/210),_.dataLength=e.DataList.length;var t=l(_.dataLength);c("#chuanke-school-main").html(p.render("chuanke-school-list",{width:t,list:e.DataList}))}function s(e,t){if(c(".chuanke-title-link-container .enter-chuanke-link").css("display","none"),c(".chuanke-title-link-container .chuanke-"+e+"-link")&&t)c(".chuanke-title-link-container .chuanke-"+e+"-link").attr("href",t),c(".chuanke-title-link-container .chuanke-"+e+"-link").css("display","inline")}function l(e){var t=Math.ceil(e/_.centerNum);if(e)c("#ibx-chuanke .ibx-card-pager").html(p.render("chuanke-pager",{length:new Array(t)})),c(".ibx-chuanke-mask").toggleClass("hidden",1===t);return t*_.boxWidth}function u(){c("#ibx-mod-chuanke").on("click",".ibx-card-pager-item",function(){var e=c(this).closest(".ibx-card-pager"),t=+c(this).attr("data-page");if(!c(this).hasClass("current"))e.find(".ibx-card-pager-item").removeClass("current"),c(this).addClass("current"),c(".chuanke-normal-list").animate({left:-w*_.centerNum*t+"px"},1e3)}),c("#ibx-mod-chuanke").on("click",".ibx-card-pager-prev",function(){var e=c(this).closest(".ibx-card-pager"),t=+e.find(".ibx-card-pager-item.current").attr("data-page")-1;t>-1&&e.find(".ibx-card-pager-item:eq("+t+")").trigger("click")}),c("#ibx-mod-chuanke").on("click",".ibx-card-pager-next",function(){var e=c(this).closest(".ibx-card-pager"),t=+e.find(".ibx-card-pager-item.current").attr("data-page")+1;t!==e.find(".ibx-card-pager-item").length&&e.find(".ibx-card-pager-item:eq("+t+")").trigger("click")})}function f(){c("#ibx-chuanke").html(p.render("chuanke-loading"))}function d(e){c("#ibx-mod-chuanke .ibx-inner-title-tabitem").removeClass("current"),e.addClass("current")}var c=require("jquery"),h=require("common/js/Remoter"),p=require("etpl"),g=require("./chuanke.tpl"),m=new h("HOME_CHUANKE_MYCOURSE"),y=new h("HOME_CHUANKE_LIVE"),v=new h("HOME_CHUANKE_ELITE"),b=new h("HOME_CHUANKE_HOT"),x=new h("HOME_CHUANKE_SCHOOL"),_={},w=0,T=0,E={},M={},S={},k={};return c(window).resize(function(){var e=c("#ibx-chuanke").width();_.boxWidth=Math.ceil(e),_.centerNum=Math.floor((_.boxWidth+10)/w),_.dataLength&&l(_.dataLength)}),{render:e}}),define("chuanke",["chuanke/main"],function(e){return e});